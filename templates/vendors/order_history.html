{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container py-5">

    <h1 class="text-center mb-5" style="font-size:2.5rem; color:#6a1b9a; font-weight:700;">
        Your Order History
    </h1>

    {% if orders %}
    <div class="row g-4">
        {% for order in orders %}
        <div class="col-md-6">
            <div class="premium-card" style="transition:0.3s; cursor:pointer;"
                onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 28px 70px rgba(0,0,0,0.28)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0,0,0,0.15)';">

                <div class="d-flex flex-column flex-md-row align-items-center gap-3">

                    <div style="position:relative; width:120px; height:120px; overflow:hidden; border-radius:15px;">
                        {% if order.items.first.food.food_img %}
                        <img src="{{ order.items.first.food.food_img.url }}"
                            style="width:100%; height:100%; object-fit:cover;">
                        {% else %}
                        <img src="{% static 'images/food.jpg' %}" style="width:100%; height:100%; object-fit:cover;">
                        {% endif %}
                        <span
                            style="position:absolute; bottom:5px; left:5px; background:rgba(0,0,0,0.6); color:#fff; padding:2px 6px; border-radius:5px; font-size:0.9rem;">
                            Order #{{ order.id }}
                        </span>
                    </div>

                    <div class="flex-grow-1">
                        <p><strong>Total Amount:</strong> â‚¹{{ order.total_amount }}</p>
                        <p><strong>Status:</strong>
                            {% if order.status == 'delivered' %}
                            <span style="background: #4caf50; color:white; padding:2px 8px; border-radius:5px;">{{
                                order.get_status_display }}</span>
                            {% elif order.status == 'cancelled' %}
                            <span style="background: #e53935; color:white; padding:2px 8px; border-radius:5px;">{{
                                order.get_status_display }}</span>
                            {% else %}
                            <span style="background: #ff9800; color:white; padding:2px 8px; border-radius:5px;">{{
                                order.get_status_display }}</span>
                            {% endif %}
                        </p>
                        <p><strong>Ordered At:</strong> {{ order.created_at|date:"d M Y, H:i" }}</p>
                        <p><strong>Payment Method:</strong> {{ order.payment_method }}</p>
                    </div>

                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-center" style="font-size:1.2rem; color:#333;">
        You have not placed any orders yet.
    </p>
    {% endif %}

</div>
{% endblock %}